<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer,Counter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- preloader -->
    <div id="preloader">
        <div class="spinner">
          <div class="rect1"></div>
          <div class="rect2"></div>
          <div class="rect3"></div>
          <div class="rect4"></div>
        </div>
    </div>
    <!-- nav_bar -->
    <header>
        <nav class="navbar">
            <a href="#" class="nav-branding">Monna</a>
            <ul class="nav-menu">
                <li class="item">
                    <a href="#" class="link"><i class="fa-solid fa-house fa-2x"></i></a>
                </li >
                <li class="item">
                    <a href="#" class="link"><i class="fa-brands fa-youtube fa-2x"></i></a>
                </li>
                <li class="item">
                    <a href="#" class="link"><i class="fa-brands fa-square-facebook fa-2x"></i></a>
                </li>
                <li class="item">
                    <a href="#" class="link"><i class="fa-solid fa-address-card fa-2x"></i></a>
                </li>
                <li class="item">
                    <a href="#" class="link">About </a>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>
    <!-- nav_bar -->

    <H1>
        Timer<BR>
        Counter
    </H1>
    <div class="img-container">
        <img class="pic" src="pic\timer.jpg" alt="">
    </div>
    <div class="intro">
        <p>
            Timer(bộ định thời),hay counter(bộ đếm) có vai trò rất quan trọng trong vi xử lý,có chức năng đếm xung nội để điều khiển thiết bị theo thời gian hoặc đếm sản phẩm và nhiều ứng dụng khác nữa<br>
            Vi xử lý pic16f887 có 3 timer: timer0(8bit),timer1(16bit) và timer2(8bit), timer2 thường ứng dụng trong chế độ băm xung(PWM)<br>
            Bài này mình chỉ làm về timer0 và timer1 còn timer2 mình sẽ làm ở phần PWM của vi xử lý.
        </p>
    </div>
    <div class="container">
        <ol class="oList" type="1">
            <li class="title">Tạo xung theo yêu cầu (Cách 1):</li>
            <div>
                <p>
                    Trong phần này ta sẽ dùng timer0,timer1 của vi xử lý để tạo xung theo yêu cầu với chu kì T = 10ms,và hệ số công tác là 30%,tần số của tụ thạch anh là 20Hz<br>
                    Tính toán đặt giá trị cho timer:<br>
                    Tần số dao động của tụ thạch danh qua bộ chia 4 sẽ còn 5Hz tương đương với chu kì T=0.2us.<br>
                    Tính toán tính hệ số chia trước(PRESCALER):<br>
                    <img class="timer" src="pic\timer0.jpg" alt=""><br>
                    Timer0 đếm được 195 xung sẽ tương đương với T=10ms.<br>
                    <img class="timer" src="pic\timer1.jpg" alt=""><br>
                    Timer1 đếm được 50 000 xung sẽ tương đương với T=10ms.
                </p>
            </div>
            <div class="sdnl-code-out">Sơ đồ nguyên lý</div>
            <div class="img-container">
                <img class="pic" src="pic\tao_xung_theo_yeu_cau.png" alt="">
            </div>
            <div class="sdnl-code-out">Code</div>
            <div class="code-container">
                <div class="code">
                    <!-- CODE HERE -->
                    <pre>
<font color="red">#INCLUDE</font> <font color="#434f54">&lt;</font><font color="#000000">16F887</font><font color="#434f54">.</font><font color="#000000">H</font><font color="#434f54">&gt;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;KHAI BAO THU VIEN THIET BI</font>
<font color="red">#FUSES</font> <font color="#000000">HS</font>
<font color="red">#USE</font> <font color="#000000">DELAY</font><font color="#000000">(</font><font color="#000000">CLOCK</font><font color="#434f54">=</font><font color="#000000">20M</font><font color="#000000">)</font>

<font color="#434f54">&#47;&#47; TIME_YEU_CAU &#47; TIME THUC HIEN 1 DAO DONG CUA VI XU LY (VD THANH ANH 20MHZ THI = 0.2US)</font>
<font color="#434f54">&#47;&#47; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#47; PRESCALER &lt;= 8BIT THI 256 16 BIT THI 65536</font>
<font color="#434f54">&#47;&#47; SAU DO CHON DC PRESCALER THI THAY LAI VAO CONG THUC</font>

<font color="#434f54">&#47;&#47; TIME(yeu cau) &#47; TIME(VXL) &#47; PRESCALER = XUNG </font>
<font color="#434f54">&#47;&#47; LAY XUNG NAY SO SANH VOI LENH GET_TIMER</font>

<font color="#434f54">&#47;&#47;TIMER 0</font>
<font color="#434f54">&#47;&#47;CHU KI 10 MS T_HIGH = 3MS </font>
<font color="#434f54">&#47;&#47;10MS &#47; 0.2 US&#47;256 = 195 CHON PRESCALER = 256</font>
<font color="#434f54">&#47;&#47; TIMER DEM DC 195 XUNG LA DC 10MS</font>


<font color="#434f54">&#47;&#47;TIMER 1 </font>
<font color="#434f54">&#47;&#47; CK = 10 MS </font>
<font color="#434f54">&#47;&#47; 10MS&#47;O.2US&#47;65536 CHON PRESCALER = 1 </font>
<font color="#434f54">&#47;&#47; 10MS&#47;0.2&#47;(PRESCALER) =50000 XUNG</font>
<font color="#434f54">&#47;&#47; 3*50000&#47;10</font>

<font color="blue">VOID</font> <font color="#000000">MAIN</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;<font color="#000000">SET_TRIS_D</font><font color="#000000">(</font><font color="#000000">0X00</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;KHOI TAO PORT D LA NGO RA</font>
&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">SETUP_TIMER_0</font><font color="#000000">(</font><font color="#000000">T0_INTERNAL</font><font color="#434f54">|</font><font color="#000000">T0_DIV_256</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;KHOI TAO TIMER 0</font>
&nbsp;&nbsp;<font color="#000000">SETUP_TIMER_1</font><font color="#000000">(</font><font color="#000000">T1_INTERNAL</font><font color="#434f54">|</font><font color="#000000">T1_DIV_BY_1</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;KHOI TAO TIMER 1</font>
&nbsp;&nbsp;<font color="#000000">SET_TIMER0</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;DAT GIA TRI BAN DAU CHO TIMER 0</font>
&nbsp;&nbsp;<font color="#000000">SET_TIMER1</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;DAT GIA TRI BAN DAU CHO TIMER 1</font>
&nbsp;&nbsp;<font color="#000000">OUTPUT_LOW</font><font color="#000000">(</font><font color="#000000">PIN_D0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">OUTPUT_LOW</font><font color="#000000">(</font><font color="#000000">PIN_D1</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="blue">WHILE</font><font color="#000000">(</font><font color="#000000">TRUE</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">IF</font><font color="#000000">(</font><font color="#000000">GET_TIMER0</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">&gt;=</font> <font color="#000000">195</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;KHI TIMER 0 DEM DUOC 195 XUNG THI T=10MS</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">SET_TIMER0</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;DAT LAI GIA TRI BAN DAU CHO TIMER 0</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">ELSE</font> <font color="blue">IF</font><font color="#000000">(</font><font color="#000000">GET_TIMER0</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">&lt;=</font> <font color="#000000">59</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; 3&#47;10*195 ~ 59 XUNG, KHI TIMER 0 DEM DUOC 59 XUNG THI T~3MS</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">OUTPUT_HIGH</font><font color="#000000">(</font><font color="#000000">PIN_D0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;XUAT MUC CAO RA CHAN D0</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">ELSE</font> <font color="#000000">OUTPUT_LOW</font><font color="#000000">(</font><font color="#000000">PIN_D0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;XUAT MUC THAP RA CHAN D0</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">IF</font><font color="#000000">(</font><font color="#000000">GET_TIMER1</font><font color="#000000">(</font><font color="#000000">)</font><font color="#434f54">&gt;=</font><font color="#000000">50000</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;TUONG TU NHU TIMER 0, TIMER 1 DEM DUOC 50000 XUNG THI T=10MS </font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">SET_TIMER1</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">ELSE</font> <font color="blue">IF</font> <font color="#000000">(</font><font color="#000000">GET_TIMER1</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">&lt;=</font> <font color="#000000">15000</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;TIMER 1 DEM DC 15000 XUNG THI T~3MS</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">OUTPUT_HIGH</font><font color="#000000">(</font><font color="#000000">PIN_D1</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">ELSE</font> <font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">OUTPUT_LOW</font><font color="#000000">(</font><font color="#000000">PIN_D1</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
                    </pre>


                </div>
            </div>
            <div class="sdnl-code-out">Output</div>
            <div class="img-container">
                <img class="pic" src="pic\out1.png" alt="">
            </div>

            <li class="title">Tạo xung theo yêu cầu (Cách 2):</li>
            <div>
                <p>
                    Trong phần này ta dùng cờ ngắt của timer để tạo xung theo yêu cầu.Mỗi timer sẽ đếm với T là 1ms thì sẽ làm cờ báo ngắt lên 1.<br><br>
                    Timer0 đếm được 256 xung thì sẽ tràn làm cờ báo ngắt của timer0(TMR0IF) lên mức 1.<br>
                    Tương tự,Timer1 là bộ đếm 16bit nên khi Timer1 đếm được 65536 xung thì sẽ tràn làm cờ báo ngắt của timer1(TMR1IF) lên mức 1.<br><br>
                    Để tạo xung theo yêu cầu với chu kỳ T=10ms, hệ số công tác là 50% thì ta dùng 1 biến "DEM",nếu "DEM"=10 thì sẽ hoàn thành 1 chu kì 10ms,khi "DEM" <=5 xung mức cao và "DEM">5 và <=10 xung mức thấp.<br><br>
                    Sơ đồ nguyên lý giống phần 1.
                </p>
            </div>
            <!-- <div class="sdnl-code-out">Sơ đồ nguyên lý</div> -->
            <!-- <div class="img-container">
                <img class="pic" src="" alt="">
            </div> -->
            <div class="sdnl-code-out">Code</div>
            <div class="code-container">
                <div class="code">
                    <!-- CODE HERE -->
                    <pre>
<font color="red">#include</font> <font color="#434f54">&lt;</font><font color="#000000">16f887</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khai bao thu vien thiet bi</font>
<font color="red">#bit</font> <font color="#000000">tmr1if</font> <font color="#434f54">=</font> <font color="#000000">0x0c</font><font color="#000000">.0</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khai bao co tran cua timer 1</font>
<font color="red">#bit</font> <font color="#000000">tmr0if</font> <font color="#434f54">=</font> <font color="#000000">0x0b</font><font color="#000000">.2</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khai bao co tran cua timer 0</font>
<font color="red">#fuses</font> <font color="#000000">hs</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="red">#use</font> <font color="#000000">delay</font><font color="#000000">(</font><font color="#000000">clock</font><font color="#434f54">=</font><font color="#000000">20m</font><font color="#000000">)</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;khai bao tan so thach anh</font>

<font color="blue">unsigned</font> <font color="blue">int8</font> <font color="#000000">i</font><font color="#434f54">,</font><font color="#000000">j</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<font color="blue">void</font> <font color="#000000">main</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;<font color="#000000">set_tris_d</font><font color="#000000">(</font><font color="#000000">0x00</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao port d la ngo ra</font>
&nbsp;&nbsp;<font color="#000000">setup_timer_1</font><font color="#000000">(</font><font color="#000000">t1_internal</font><font color="#434f54">|</font><font color="#000000">t1_div_by_1</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao timer 1</font>
&nbsp;&nbsp;<font color="#000000">set_timer1</font><font color="#000000">(</font><font color="#000000">60536</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;dat gia tri bat dau cho timer 1</font>
&nbsp;&nbsp;<font color="#000000">i</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">output_low</font><font color="#000000">(</font><font color="#000000">pin_d0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;xuat xung muc thap tren chan d0</font>
&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">setup_timer_0</font><font color="#000000">(</font><font color="#000000">t0_internal</font><font color="#434f54">|</font><font color="#000000">t0_div_32</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao timer 0</font>
&nbsp;&nbsp;<font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">100</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;dat gia tri ban dau cho timer 0</font>
&nbsp;&nbsp;<font color="#000000">j</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">output_low</font><font color="#000000">(</font><font color="#000000">pin_d1</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;xuat xung muc thap tren chan d1</font>
&nbsp;&nbsp;
&nbsp;&nbsp;<font color="blue">while</font><font color="#000000">(</font><font color="blue">true</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">tmr1if</font> <font color="#434f54">==</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khi timer 1 dem len 65535, dem them 1 xung nua thi lam co tran len muc 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;tang bien dem len 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">tmr1if</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;ep co tran xuong muc 0, cho timer 1 dem tro lai</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">set_timer1</font><font color="#000000">(</font><font color="#000000">60536</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;dat gia tri ban dau cho timer 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">&gt;</font><font color="#000000">10</font><font color="#000000">)</font><font color="#000000">i</font><font color="#434f54">=</font><font color="#000000">1</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khi bien dem = 10, thi duoc chu ki 10ms, cho bien dem tro lai 1, de tiep tuc chu ki tiep theo</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">&lt;=</font><font color="#000000">5</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;5ms dau cua chu ki</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_high</font><font color="#000000">(</font><font color="#000000">pin_d0</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;xuat muc cao ra chaan d0</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font><font color="blue">else</font> <font color="blue">if</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">&gt;</font><font color="#000000">5</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;5ms cuoi cua chu ki</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_low</font><font color="#000000">(</font><font color="#000000">pin_d0</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;xuat muc thap ra chan d0</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font> &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">tmr0if</font> <font color="#434f54">==</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;vi timer 0 chi co 8 bit nen khi dem len 255,dem them 1 xung nua thi lam co tran len muc 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">j</font><font color="#434f54">++</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;tang bien dem len 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">tmr0if</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;ep co tran xuong muc 0, cho timer 0 dem tro lai</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">100</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;dat gia tri ban dau cho timer 0,phan con lai thi tuong tu nhu timer 1</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">j</font><font color="#434f54">&gt;</font><font color="#000000">10</font><font color="#000000">)</font><font color="#000000">j</font><font color="#434f54">=</font><font color="#000000">1</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">j</font><font color="#434f54">&lt;=</font><font color="#000000">5</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_high</font><font color="#000000">(</font><font color="#000000">pin_d1</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font><font color="blue">else</font> <font color="blue">if</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">&gt;</font><font color="#000000">5</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_low</font><font color="#000000">(</font><font color="#000000">pin_d1</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
                    </pre>


                </div>
            </div>
            <div class="sdnl-code-out">Output</div>
            <div class="img-container">
                <img class="pic" src="pic\out2.png" alt="">
            </div>


            <li class="title">Dùng timer để điều khiền nhiều chương trình led với thời gian delay khác nhau</li>
            <div>
                <p>
                    Trong phần này, ta dùng time1 diều khiển led sáng dần,tắt dần ở port d và timer0 điều khiển led sáng dồn ở port b.<br>
                    
                    Phần led sáng dồn thay vì dùng 2 vòng for, thì ta dùng if để chương trình chạy liên tục mà không bị ngắt quảng.
                </p>
            </div>
            <div class="sdnl-code-out">Sơ đồ nguyên lý</div>
            <div class="img-container">
                <img class="pic" src="pic\led_timer.png" alt="">
            </div>
            <div class="sdnl-code-out">Code</div>
            <div class="code-container">
                <div class="code">
                    <!-- CODE HERE -->
                
                    <pre>
<font color="red">#include</font><font color="#434f54">&lt;</font><font color="#000000">16f887</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> &nbsp;<font color="#434f54">&#47;&#47;khai bao thu vien thiet bi</font>
<font color="red">#fuses</font> <font color="#000000">hs</font>
<font color="red">#use</font> <font color="#000000">delay</font><font color="#000000">(</font><font color="#000000">clock</font><font color="#434f54">=</font><font color="#000000">20m</font><font color="#000000">)</font>
<font color="red">#bit</font> <font color="#000000">tmr1if</font> <font color="#434f54">=</font><font color="#000000">0x0c</font><font color="#000000">.0</font> &nbsp;<font color="#434f54">&#47;&#47;khai bao co tran cua timer1</font>
<font color="red">#bit</font> <font color="#000000">tmr0if</font> <font color="#434f54">=</font><font color="#000000">0x0b</font><font color="#000000">.2</font> &nbsp;<font color="#434f54">&#47;&#47;khai bao co tran cua timer0</font>

<font color="blue">unsigned</font> <font color="blue">int8</font> <font color="#000000">dem</font><font color="#434f54">,</font><font color="#000000">led</font><font color="#434f54">,</font><font color="#000000">y</font><font color="#000000">;</font>

<font color="blue">unsigned</font> <font color="blue">int8</font> <font color="#000000">last_state</font><font color="#434f54">,</font><font color="#000000">state</font><font color="#434f54">,</font><font color="#000000">move</font><font color="#434f54">,</font><font color="#000000">count</font><font color="#434f54">,</font><font color="#000000">i</font><font color="#434f54">,</font><font color="#000000">j</font><font color="#000000">;</font>

<font color="blue">void</font> <font color="#000000">main</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;<font color="#000000">set_tris_d</font><font color="#000000">(</font><font color="#000000">0x00</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;khoi tao port d la ngo ra</font>
&nbsp;&nbsp;<font color="#000000">set_tris_b</font><font color="#000000">(</font><font color="#000000">0x00</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;khoi tao port b la ngo ra</font>
&nbsp;&nbsp;<font color="#000000">setup_timer_1</font><font color="#000000">(</font><font color="#000000">t1_internal</font><font color="#434f54">|</font><font color="#000000">t1_div_by_8</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao timer1</font>
&nbsp;&nbsp;<font color="#000000">setup_timer_0</font><font color="#000000">(</font><font color="#000000">t0_internal</font><font color="#434f54">|</font><font color="#000000">t0_div_256</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao timer0</font>
&nbsp;&nbsp;<font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">61</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;dat gia tri ban dau cho timer0</font>
&nbsp;&nbsp;<font color="#000000">set_timer1</font><font color="#000000">(</font><font color="#000000">3036</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;dat gia tri ban dau cho timer1</font>
&nbsp;&nbsp;<font color="#000000">dem</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">y</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">output_d</font><font color="#000000">(</font><font color="#000000">y</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">state</font><font color="#434f54">=</font><font color="#000000">last_state</font><font color="#434f54">=</font><font color="#000000">count</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">i</font><font color="#434f54">=</font><font color="#000000">j</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">move</font><font color="#434f54">=</font><font color="#000000">1</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">output_b</font><font color="#000000">(</font><font color="#000000">state</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;
&nbsp;&nbsp;<font color="blue">while</font><font color="#000000">(</font><font color="blue">true</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">tmr1if</font><font color="#434f54">==</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dem</font><font color="#434f54">++</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">tmr1if</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">set_timer1</font><font color="#000000">(</font><font color="#000000">3036</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">dem</font><font color="#434f54">==</font><font color="#000000">2</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dem</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">led</font><font color="#434f54">++</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">led</font><font color="#434f54">&lt;=</font><font color="#000000">8</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">y</font><font color="#434f54">=</font><font color="#000000">(</font><font color="#000000">y</font><font color="#434f54">&lt;&lt;</font><font color="#000000">1</font><font color="#000000">)</font><font color="#434f54">|</font><font color="#000000">1</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font><font color="blue">else</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">y</font><font color="#434f54">=</font><font color="#000000">y</font><font color="#434f54">&lt;&lt;</font><font color="#000000">1</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">led</font><font color="#434f54">==</font><font color="#000000">16</font><font color="#000000">)</font><font color="#000000">led</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_d</font><font color="#000000">(</font><font color="#000000">y</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">tmr0if</font><font color="#434f54">==</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">count</font><font color="#434f54">++</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">tmr0if</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">61</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">count</font><font color="#434f54">==</font><font color="#000000">50</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">count</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">state</font><font color="#434f54">=</font><font color="#000000">last_state</font><font color="#434f54">|</font><font color="#000000">move</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">output_b</font><font color="#000000">(</font><font color="#000000">state</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">move</font><font color="#434f54">=</font><font color="#000000">move</font><font color="#434f54">&lt;&lt;</font><font color="#000000">1</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">j</font><font color="#434f54">++</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">j</font><font color="#434f54">%</font><font color="#000000">8</font><font color="#434f54">==</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">j</font><font color="#434f54">=</font><font color="#000000">i</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">last_state</font><font color="#434f54">=</font><font color="#000000">state</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">move</font><font color="#434f54">=</font><font color="#000000">1</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="blue">if</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">==</font><font color="#000000">8</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">i</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">j</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">last_state</font><font color="#434f54">=</font><font color="#000000">state</font><font color="#434f54">=</font><font color="#000000">0</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
                    </pre>


                </div>
            </div>
            <div class="sdnl-code-out">Output</div>
            <div class="img-container">
                <img class="pic" src="pic\out_3.gif" alt="">
            </div>

            <li class="title">Đếm xung ngoài</li>
            <div>
                <p>
                    Phần này ta dùng timer0 để đếm xung ngoài, kích cạnh xuống. Kết nối chân T0CKI với 1 nút nhấn có điện trở kéo lên, mỗi lần nhấn nút nhấn sẽ tạo một xung, khi đó giá trị của timer0 sẽ tăng lên 1.<br>
                </p>
            </div>
            <div class="sdnl-code-out">Sơ đồ nguyên lý</div>
            <div class="img-container">
                <img class="pic" src="pic\dem_xung_ngoai.png" alt="">
            </div>
            <div class="sdnl-code-out">Code</div>
            <div class="code-container">
                <div class="code">
                    <!-- CODE HERE -->
                
                    <pre>
<font color="red">#include</font> <font color="#434f54">&lt;</font><font color="#000000">16f887</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font>
<font color="red">#fuses</font> <font color="#000000">hs</font>
<font color="red">#use</font> <font color="#d35400">delay</font><font color="#000000">(</font><font color="#d35400">clock</font><font color="#434f54">=</font><font color="#000000">20M</font><font color="#000000">)</font>
<font color="red">#include</font> <font color="#434f54">&lt;</font><font color="#000000">tv_lcd</font><font color="#434f54">.</font><font color="#000000">c</font><font color="#434f54">&gt;</font>

<font color="blue">unsigned</font> <font color="blue">int8</font> <font color="#000000">t0</font><font color="#000000">;</font>

<font color="blue">void</font> <font color="#000000">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;hien thi len lcd hang 2</font>
&nbsp;&nbsp;<font color="#000000">lcd_command</font><font color="#000000">(</font><font color="#000000">0xc0</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">lcd_data</font><font color="#000000">(</font><font color="#000000">t0</font><font color="#434f54">&#47;</font><font color="#000000">10</font><font color="#434f54">%</font><font color="#000000">10</font><font color="#434f54">+</font><font color="#000000">0x30</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">lcd_data</font><font color="#000000">(</font><font color="#000000">t0</font><font color="#434f54">%</font><font color="#000000">10</font><font color="#434f54">+</font><font color="#000000">0x30</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="blue">void</font> <font color="#000000">main</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;<font color="#000000">set_tris_d</font><font color="#000000">(</font><font color="#000000">0x00</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">set_tris_e</font><font color="#000000">(</font><font color="#000000">0x00</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">setup_timer_0</font><font color="#000000">(</font><font color="#000000">t0_ext_h_to_l</font><font color="#434f54">|</font><font color="#000000">t0_div_1</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao timer0 dem xung ngoai kich canh xuong</font>
&nbsp;&nbsp;<font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">lcd_setup</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;khoi tao lcd</font>
&nbsp;&nbsp;<font color="#000000">lcd_command</font><font color="#000000">(</font><font color="#000000">0x80</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#000000">lcd_data</font><font color="#000000">(</font><font color="#005c5f">&#34;DEM XUNG NGOAI&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;<font color="#5e6d03">while</font><font color="#000000">(</font><font color="blue">true</font><font color="#000000">)</font><font color="#000000">{</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">t0</font><font color="#434f54">=</font><font color="#000000">get_timer0</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font><font color="#000000">(</font><font color="#000000">t0</font><font color="#434f54">&gt;</font><font color="#000000">20</font><font color="#000000">)</font><font color="#000000">set_timer0</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
                    </pre>

                </div>
            </div>
            <div class="sdnl-code-out">Output</div>
            <div class="img-container">
                <img class="pic" src="pic\out_4.png" alt="">
            </div>
        </div>
        </ol>
    </div>





    <!-- FOOTER -->
    <div id="changepage">
        <div class="row">
            <a href="#" class="col-1">Trang Trước</a>
            <a href="#" class="col-2">Trang Sau</a>
        </div>
    </div>
    <div id="footer">
        <p>
            No venturing No gaining<br>
            Let's defeat MCU with me 😂 
        </p>
    </div>
    <script src="index.js"></script>
</body>
</html>